# 💻 Computer Science - 컴퓨터 구조

## 컴퓨터의 구성

컴퓨터 시스템은 크게 하드웨어와 소프트웨어로 나누어진다.

#### 하드웨어: 컴퓨터를 구성하는 기계적 장치

- 중앙처리장치(CPU)
- 기억장치: RAM, HDD
- 입출력 장치: 마우스, 프린터, 키보드

#### 소프트웨어: 하드웨어의 동작을 지시하고 제어하는 명령어

- 시스템 소프트웨어: 운영체제, 컴파일러
- 응용 소프트웨어: 워드프로세서, 스프레드시트

## 하드웨어

하드웨어는

- 중앙처리장치(CPU)
- 기억장치
- 입출력장치로

구성되어 있다.

이들은 시스템 버스로 연결되어 있으며, 시스템 버스는 데이터와 명령 제어 신호를 각 장치고 실어 나르는 역할을 한다.

### 중앙처리장치(CPU)

- 인간의 두뇌에 해당하는 부분
- 주기억장치에서 프로그램 명령어와 데이터를 읽어와 처리하고 명령어의 수행 순서를 제어함
- 중앙처리장치는 비교와 연산을 담당하는 산술논리연산장치(ALU)와 명령어의 해석과 실행을 담당하는 제어장치, 속도가 빠른 데이터 기억장소인 레지스터로 구성됨.
- 소형 컴퓨터에서는 CPU를 마이크로프로세서라고 부름

### 입출력 장치

- 입력과 출력 장치로 나누어짐
- 입력장치는 컴퓨터 내부로 자료를 입력하는 장치
- 출력 장치는 컴퓨터에서 외부로 표현하는 장치

## 시스템버스

> 하드웨어와 구성요소를 물리적으로 연결하는 선 (데이터를 보낼수 있도록 통로 역할을함)

- 데이터버스
- 주소버스
- 제어버스

### 데이터버스

- 중앙처리장치와 기타 장치 사이에서 데이터를 전달하는 통로
- 기억장치와 입출력장치의 명령어와 데이터를 중앙처리장치로 보내거나, 중앙처리장치의 연산 결과를 기억장치와 입출력장치로 보내는 '양방향' 버스임

### 주소버스

- 데이터를 정확히 실어나르기 위해서는 기억장치 '주소'를 정해주어야 함.
- 주소버스는 중앙처리장치가 주기억장치나 입출력장치로 기억장치 주소를 전달하는 통로이기 떄문에 '단방향' 버스임

### 제어버스

- 주소버스와 데이터버스는 모든 장치에 공유되기 떄문에 이를 제어할 수단이 필요함
- 제어버스는 중앙처리장치가 기억장치나 입출력장치에 제어신호를 전달하는 통로임
- 제어버스는 읽기 동작과 쓰기 동작을 모두 수행하기 때문에 '양방향' 버스임

제어신호 종류: 기억장치 읽기 및 쓰기, 버스 요청 및 승인, 인터럽트 요청 및 승인, 클락, 리셋 등

> 컴퓨터는 기본적으로 읽고 처리한 뒤 저장하는 과정으로 이루어짐
> (Read -> Process -> Write)

## 중앙처리장치(CPU) 작동원리

CPU는 컴퓨터에서 가장 핵심적인 역할을 수행하는 부분. '인간의 두뇌'에 해당

- 연산 장치
  산술연산과 논리연산 수행(따라서 산술논리연산장치라고도 불림)
  연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터로 보냄

- 제어 장치
  명령어를 순서대로 실행할 수 있도록 제어하는 장치

  주기억장치에서 프로그램 명령어를 꺼내 해독하고, 그 결과에 따라 명령어 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력장치로 보냄

  또한 이들 장치가 보낸 신호를 받아, 다음에 수행할 동작을 결정함

- 레지스터
  고속 기억장치임
  명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장

  용도에 따라 범용 레지스터와 특수목적 레지스터로 구분됨

  중앙처리장치 종류에 따라 사용할 수 있는 레지스터 개수와 크기가 다름

  - 범용 레지스터: 연산에 필요한 데이터나 연산 결과를 임시로 저장
  - 특수목적 레지스터: 특별한 용도로 사용하는 레지스터

## 특수 목적 레지스터 중 중요한 것들

- MAR(메모리 주소 레지스터): 읽기와 쓰기 연산을 수행할 주 기억장치 주소 저장
- PC(프로그램 카운터): 다음에 수행할 명령어 주소 저장
- IR(명령어 레지스터): 현재 실행 중인 명령어 저장
- MBR(메모리 버퍼 레지스터): 주기억장치에서 읽어온 데이터 or 저장할 데이터 임시 저장
- AC(누산기): 연산 결과 임시저장

## CPU의 동작 과정

1. 주기억장치는 입력장치에서 입력받은 데이터 또는 보조기억장치에 저장된 프로그램 읽어옴
2. CPU는 프로그램을 실행하기 위해 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리하고 결과를 다시 주기억장치에 저장
3. 주기억장치는 처리 결과를 보조기억장치에 저장하거나 출력장치로 보냄
4. 제어장치는 1~3 과정에서 명령어가 순서대로 실행되도록 각 장치를 제어

### 명령어 세트란?

### CPU가 실행할 명령어 집합

> 연산코드(Operation Code) + 피연산자(Operand)로 이루어짐
> 연산코드: 실행할 연산
> 피연산자: 필요한 데이터 or 저장 위치

- 연산 코드는 연산, 제어, 데이터 전달, 입출력 기능을 가짐
- 피연산자는 주소, 숫자/문자, 논리 데이터 등을 저장
- CPU는 프로그램 실행하기 위해 주기억장치에서 명령어를 순차적으로 인출하여 해독하고 실행하는 과정을 반복함
- CPU가 주기억장치에서 한번에 하나의 명령어를 인출하여 실행하는데 필요한 일련의 활동을 '명령어 사이클' 이라고 말함
- 명령어 사클은 인출/실행/간접/인터럽트 사이클로 나누어짐
- 주기억장치의 지정된 주소에서 하나의 명령어를 가져오고, 실행 사이클에서는 명령어를 실행함. 하나의 명령어 실행이 완료되면 그 다름 명령어에 대한 인출 사이클 시작

### 인출 사이클과 실행 사이클에 의한 명령어 처리 과정

> 인출 사이클에서 가장 중요한 부분은 PC(프로그램 카운터) 값 증가

- PC에 저장된 주소를 MAR로 전달
- 저장된 내용을 토대로 주기억장치의 해당 주소에서 명령어 인출
- 인출한 명령어를 MBR에 저장
- 다음 명령어를 인출하기 위해 PC 값 증가시킴
- 메모리 버퍼 레지스터(MBR)에 저장된 내용을 명령어 레지스터(IR)에 전달

```js
T0 : MAR ← PC
T1 : MBR ← M[MAR], PC ← PC+1
T2 : IR ← MBR
```

여기까지는 인출하기까지의 과정

### 인출한 이후, 명령어를 실행하는 과정

> ADD addr 명령어 연산

```js
T0 : MAR ← IR(Addr)
T1 : MBR ← M[MAR]
T2 : AC ← AC + MBR
```

- 이미 인출이 진행되고 명령어만 실행되면 되기 때문에 PC를 증가할 필요 X
- IR에 MBR의 값이 이미 저장된 상태를 의미함 따라서 AC에 MBR을 더해주기만 하면 됨
